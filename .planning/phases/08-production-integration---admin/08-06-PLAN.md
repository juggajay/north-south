---
phase: 08-production-integration-admin
plan: 06
type: execute
wave: 3
depends_on: ["08-04", "08-05"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "PDF spec downloads and opens correctly"
    - "CSV files import into spreadsheet correctly"
    - "QR codes scan to panel info page"
    - "Photo upload saves to correct order"
    - "Status changes trigger notification emails"
    - "All admin features accessible from order card"
  artifacts: []
  key_links: []
---

<objective>
Human verification of complete Phase 08 functionality.

Purpose: Verify all production integration and admin features work end-to-end before marking phase complete.
Output: Verified working system with all must-haves confirmed.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-production-integration---admin/08-RESEARCH.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete Phase 08 implementation:
1. PDF production spec generation with all sections
2. CSV export for panel schedule and hardware list
3. QR label sheet generation for printing
4. Admin order management with status workflow
5. Production photo upload with milestone tagging
6. Manual notification email triggers
7. All features integrated into admin order card
  </what-built>
  <how-to-verify>
**Pre-requisites:**
- Run `npm run dev` to start development server
- Ensure you have at least one order in the system (create via submission flow if needed)

**Test 1: Admin Order List**
1. Navigate to http://localhost:3000/admin/orders
2. Verify order list displays with order numbers and status badges
3. Click an order to expand it
4. Verify you see: customer info, timeline, status actions, photo upload, notifications, production specs

**Test 2: Status Workflow**
1. With an order expanded, find the "Actions" section
2. Click a status transition button (e.g., "Move to In Production")
3. Verify:
   - Toast shows success message
   - Status badge updates
   - Timeline shows new timestamp
   - (If Resend configured) Check that notification email was sent

**Test 3: Photo Upload**
1. Expand the "Upload Photos" section in an order
2. Select a milestone (e.g., "Production")
3. Click to select a photo file
4. Verify preview shows
5. Click "Upload Photo"
6. Verify:
   - Toast shows success
   - (Check Convex dashboard that productionPhotos record was created)

**Test 4: Production Spec PDF**
1. Expand the "Production Specs" section
2. Click "Production Spec (PDF)"
3. Wait for generation (may take a few seconds)
4. Verify PDF downloads
5. Open PDF and verify it contains:
   - Header with order number, customer name
   - Cabinet Schedule table
   - Panel Schedule table
   - Edge Banding Summary
   - Hardware List with totals

**Test 5: CSV Exports**
1. In the Production Specs section, click "Panel Schedule (CSV)"
2. Open in Excel/Google Sheets, verify columns: Panel ID, Name, Cabinet Ref, Dimensions, Material, Grain, Edges
3. Click "Hardware List (CSV)"
4. Open in spreadsheet, verify columns: Code, Description, Supplier, Qty, Unit Price, Total
5. Verify total row at bottom

**Test 6: QR Labels**
1. Click "QR Labels (Print)" button
2. Verify new tab opens with QR label grid
3. Each label should show: QR code, Panel ID, Cabinet Ref, Dimensions
4. Click Print button, verify print dialog appears
5. (Optional) If you have a QR scanner, scan a code and verify it links to /panel/{qrCode}

**Test 7: Notification Trigger**
1. Expand "Send Notification" section
2. Select a notification type from dropdown
3. Click "Send Email"
4. Verify:
   - Toast shows success with recipient email
   - (If Resend configured) Check email was received

**Test 8: Build Verification**
1. Run `npm run build`
2. Verify build completes without errors
3. Check for any "window is not defined" errors (should be none due to dynamic imports)
  </how-to-verify>
  <resume-signal>
Report results for each test:
- Test 1 (Order List): PASS/FAIL + notes
- Test 2 (Status Workflow): PASS/FAIL + notes
- Test 3 (Photo Upload): PASS/FAIL + notes
- Test 4 (PDF Spec): PASS/FAIL + notes
- Test 5 (CSV Export): PASS/FAIL + notes
- Test 6 (QR Labels): PASS/FAIL + notes
- Test 7 (Notifications): PASS/FAIL + notes
- Test 8 (Build): PASS/FAIL + notes

If any tests fail, describe the issue for fix.
Type "approved" if all tests pass.
  </resume-signal>
</task>

</tasks>

<verification>
All Phase 08 must-haves verified:
- [ ] PDF spec includes: header, cabinet schedule, panel schedule, edge banding, drilling, hardware, assembly groups
- [ ] CSV spec importable to spreadsheet
- [ ] QR labels link to panel info page
- [ ] Panel info shows dimensions, material, edges, assembly context
- [ ] Admin can view/manage all submissions (existing from Phase 06)
- [ ] Admin can update order status
- [ ] Admin can upload production photos
- [ ] Admin can download production specs
- [ ] Admin can trigger notification emails
</verification>

<success_criteria>
All 8 verification tests pass.
User confirms "approved" to complete phase.
</success_criteria>

<output>
After completion, create `.planning/phases/08-production-integration---admin/08-06-SUMMARY.md`

Then update STATE.md to mark Phase 08 complete and prepare for any future phases.
</output>
