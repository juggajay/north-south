---
phase: 03-ai-pipeline
plan: 06
type: execute
wave: 4
depends_on: ["03-04", "03-05"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "Photo capture triggers processing pipeline"
    - "Processing shows animated stage progression"
    - "3 styled renders are generated and displayed"
    - "User can swipe between renders"
    - "Error handling shows retry option"
    - "Customize this button is accessible"
---

<objective>
Human verification of the complete AI pipeline flow from photo capture to render display.

Purpose: Ensure the end-to-end user experience works correctly before moving to the 3D configurator phase.
Output: Verified working pipeline ready for Phase 04 integration.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/03-ai-pipeline/03-CONTEXT.md
@.planning/phases/03-ai-pipeline/03-05-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete AI pipeline flow:
1. Photo capture (from Phase 02)
2. Processing screen with animated progress stages
3. Claude Vision space analysis
4. Dimension estimation with confidence tier
5. Render generation (3 styled options)
6. Swipeable render carousel
7. Error handling with retry
  </what-built>
  <how-to-verify>
**Prerequisites:**
- Ensure ANTHROPIC_API_KEY is set in Convex environment variables
- Ensure GEMINI_API_KEY is set in Convex environment variables
- Run `npm run dev` and open the app

**Test Flow:**

1. **Open Camera:**
   - Tap "Take Photo" on Home tab
   - Verify camera interface opens with corner brackets and tips

2. **Capture Photo:**
   - Hold capture button for 1 second
   - Use a photo of an actual room/space (kitchen, bedroom, etc.)
   - OR select from gallery with "Gallery" button

3. **Photo Preview:**
   - Verify quality validation runs
   - If valid, tap "Use Photo"
   - (If invalid, retake with better lighting/focus)

4. **Processing Screen:**
   - Verify processing screen appears immediately
   - Check animated geometric shapes display
   - Watch stage progression: Analyzing -> Measuring -> Styling -> Creating
   - Each completed stage should show checkmark
   - Current stage should show spinner
   - No time estimates should be visible

5. **Render Carousel:**
   - After ~15-30 seconds, renders should appear
   - Verify 3 renders are shown (or fewer if some failed)
   - Swipe left/right between renders
   - Check pagination dots update
   - Verify style label changes with each render
   - Check dimension badge shows estimates with tier label

6. **CTA and Disclaimer:**
   - Verify "Customize this" button is visible
   - Tap button and check console log shows selected render info
   - Verify disclaimer text: "Estimates from photo - site measure confirms final dimensions"

7. **Back Navigation:**
   - Tap back button (top-left)
   - Verify returns to camera/home state

8. **Error Handling (Optional):**
   - If an error occurs during testing, verify:
     - Error message is clear
     - "Try Again" button is visible
     - Retry restarts the flow
   - To test error state: Use a photo that isn't a room (close-up, landscape, etc.)

**Expected Results:**
- Full flow completes in < 60 seconds (ideally < 30s)
- UI is responsive throughout processing
- Animations are smooth
- Renders show joinery in the captured space
- Dimensions are reasonable for the room type
  </how-to-verify>
  <resume-signal>
Type "approved" if all verifications pass.
If issues found, describe:
- Which step failed
- What was expected vs actual behavior
- Any error messages shown
  </resume-signal>
</task>

</tasks>

<verification>
Human verification of complete pipeline:
- [ ] Processing screen shows animated progress
- [ ] Stage checkmarks appear as stages complete
- [ ] Renders are generated and displayed
- [ ] Carousel is swipeable
- [ ] Pagination dots work
- [ ] "Customize this" button accessible
- [ ] Dimensions displayed with tier label
- [ ] Error handling works (if tested)
</verification>

<success_criteria>
- Complete flow works end-to-end
- Processing takes < 60 seconds
- At least 1 render is generated
- User can navigate through renders
- Error state is recoverable
- Phase 03 requirements met (PROC-001 through AI-007)
</success_criteria>

<output>
After completion, create `.planning/phases/03-ai-pipeline/03-06-SUMMARY.md`
</output>
